<div class="one">
<ng-container *ngIf="chat$ | async as chat">
  <ng-container *ngIf=" auth.user$ | async as user">

    <div class="top">
      <p><a class="tag" routerLink="/">Back</a>
        <span class="tag is-success">
            http://localhost:4200/chats/{{ chat.id }}
        </span>
      </p>
    </div>


    <div #chatBox class="chat">


      <div class="msg animated zoomInUp" *ngFor="let msg of chat.messages; trackBy: trackByCreated">

        <div class="user">
          <img [src]="msg.user?.photoURL || 'assets/unicorn.svg'" width="50px">
          <!-- <div><span class="tag is-dark">{{ msg.user?.displayName || msg.user?.uid }}</span></div> -->

          <!-- <button *ngIf="chat.uid === user.uid || msg.uid === user.uid" class="button is-danger is-small" (click)="cs.deleteMessage(chat, msg)">Delete</button> -->

        </div>

        <div class="message-bubble">
          {{ msg.content }}
          <div class="dropdown">
              <i class="fa fa-ellipsis-h" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <button class="dropdown-item" href="#" *ngIf="chat.uid === user.uid || msg.uid === user.uid" (click)="cs.deleteMessage(chat, msg)">Delete</button>
              </div>
            </div>
        </div>


      </div>



    </div>

    <div class="form">
      <input class="input" [(ngModel)]="newMsg" maxlength="100" (keydown.enter)="submit(chat.id)">

      <button (click)="submit(chat.id)" class="button is-info" [disabled]="!newMsg">Send</button>
    </div>

  </ng-container>
</ng-container>

</div>